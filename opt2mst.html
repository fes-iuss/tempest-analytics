<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opt2mst - The Kiwi Hero</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #87CEEB, #228B22);
            font-family: 'Arial', sans-serif;
            color: #333;
        }
        
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #2E8B57;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            font-style: italic;
            color: #666;
            margin-bottom: 20px;
        }
        
        #gameCanvas {
            border: 3px solid #2E8B57;
            border-radius: 10px;
            display: block;
            margin: 20px auto;
            background: #87CEEB;
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        button {
            background: #2E8B57;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background: #228B22;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            font-weight: bold;
        }
        
        .kiwi-phrases {
            background: #f0f8f0;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #2E8B57;
        }
        
        .instructions {
            background: #e6f3ff;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ü§ñ OPT2MST ü•ù</h1>
        <div class="subtitle">The Optimistic Kiwi Transformer</div>
        
        <div class="instructions">
            <h3>How to Play:</h3>
            <p>Help Opt2mst collect pavlova pieces and avoid the drop bears! Use WASD or arrow keys to move around beautiful Aotearoa.</p>
        </div>
        
        <div class="stats">
            <div>Pavlova Collected: <span id="score">0</span></div>
            <div>Lives: <span id="lives">3</span></div>
            <div>Level: <span id="level">1</span></div>
        </div>
        
        <canvas id="gameCanvas" width="760" height="400"></canvas>
        
        <div class="controls">
            <button onclick="startGame()">Start New Game</button>
            <button onclick="togglePause()">Pause/Resume</button>
        </div>
        
        <div class="kiwi-phrases">
            <h3>Opt2mst's Kiwi Wisdom:</h3>
            <div id="kiwiPhrase">"She'll be right, mate! Let's transform this situation!"</div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Game state
        let gameRunning = false;
        let gamePaused = false;
        let score = 0;
        let lives = 3;
        let level = 1;
        
        // Kiwi phrases for Opt2mst
        const kiwiPhrases = [
            "She'll be right, mate! Let's transform this situation!",
            "Sweet as, bro! Time to roll out across the South Island!",
            "Chur bro! These pavlovas won't collect themselves!",
            "Good as gold! Protecting Aotearoa is my calling!",
            "Yeah, nah, yeah! Those drop bears are no match for us!",
            "Choice as! Let's head to the bach after this mission!",
            "Too right! The All Blacks would be proud!",
            "Skux as! Time for some fish and chips after saving the day!",
            "Hard yakka, but someone's gotta do it!",
            "Munted drop bears everywhere! Time to sort them out!"
        ];
        
        // Game objects
        const player = {
            x: 50,
            y: 200,
            width: 40,
            height: 40,
            speed: 5,
            color: '#FF4500'
        };
        
        let pavlovas = [];
        let dropBears = [];
        let particles = [];
        
        // Input handling
        const keys = {};
        
        document.addEventListener('keydown', (e) => {
            keys[e.key.toLowerCase()] = true;
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
        });
        
        // Game functions
        function startGame() {
            gameRunning = true;
            gamePaused = false;
            score = 0;
            lives = 3;
            level = 1;
            player.x = 50;
            player.y = 200;
            pavlovas = [];
            dropBears = [];
            particles = [];
            
            // Create initial pavlovas
            for (let i = 0; i < 5; i++) {
                createPavlova();
            }
            
            // Create initial drop bears
            for (let i = 0; i < 2; i++) {
                createDropBear();
            }
            
            updateKiwiPhrase();
            gameLoop();
        }
        
        function togglePause() {
            if (gameRunning) {
                gamePaused = !gamePaused;
                if (!gamePaused) {
                    gameLoop();
                }
            }
        }
        
        function createPavlova() {
            pavlovas.push({
                x: Math.random() * (canvas.width - 30) + 15,
                y: Math.random() * (canvas.height - 30) + 15,
                width: 25,
                height: 25,
                collected: false
            });
        }
        
        function createDropBear() {
            dropBears.push({
                x: canvas.width + 50,
                y: Math.random() * (canvas.height - 40),
                width: 35,
                height: 35,
                speed: 2 + level * 0.5,
                direction: Math.random() * Math.PI * 2
            });
        }
        
        function updatePlayer() {
            // Movement
            if (keys['w'] || keys['arrowup']) {
                player.y = Math.max(0, player.y - player.speed);
            }
            if (keys['s'] || keys['arrowdown']) {
                player.y = Math.min(canvas.height - player.height, player.y + player.speed);
            }
            if (keys['a'] || keys['arrowleft']) {
                player.x = Math.max(0, player.x - player.speed);
            }
            if (keys['d'] || keys['arrowright']) {
                player.x = Math.min(canvas.width - player.width, player.x + player.speed);
            }
        }
        
        function updatePavlovas() {
            pavlovas.forEach((pavlova, index) => {
                // Check collision with player
                if (!pavlova.collected && 
                    player.x < pavlova.x + pavlova.width &&
                    player.x + player.width > pavlova.x &&
                    player.y < pavlova.y + pavlova.height &&
                    player.y + player.height > pavlova.y) {
                    
                    pavlova.collected = true;
                    score += 10;
                    createParticles(pavlova.x, pavlova.y);
                    
                    // Create new pavlova
                    setTimeout(() => {
                        pavlovas.splice(index, 1);
                        createPavlova();
                    }, 100);
                }
            });
        }
        
        function updateDropBears() {
            dropBears.forEach((bear, index) => {
                // Move drop bear
                bear.x -= bear.speed;
                bear.y += Math.sin(bear.direction) * 2;
                bear.direction += 0.1;
                
                // Wrap around screen
                if (bear.x < -50) {
                    bear.x = canvas.width + 50;
                    bear.y = Math.random() * (canvas.height - 40);
                }
                
                // Keep in bounds vertically
                if (bear.y < 0 || bear.y > canvas.height - bear.height) {
                    bear.direction = -bear.direction;
                }
                
                // Check collision with player
                if (player.x < bear.x + bear.width &&
                    player.x + player.width > bear.x &&
                    player.y < bear.y + bear.height &&
                    player.y + player.height > bear.y) {
                    
                    lives--;
                    updateKiwiPhrase();
                    
                    // Reset player position
                    player.x = 50;
                    player.y = 200;
                    
                    if (lives <= 0) {
                        gameRunning = false;
                        alert(`Game Over! Final score: ${score}\nOpt2mst says: "No worries mate, we'll get 'em next time!"`);
                    }
                }
            });
        }
        
        function createParticles(x, y) {
            for (let i = 0; i < 8; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    life: 30,
                    color: `hsl(${Math.random() * 60 + 30}, 70%, 60%)`
                });
            }
        }
        
        function updateParticles() {
            particles.forEach((particle, index) => {
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.life--;
                
                if (particle.life <= 0) {
                    particles.splice(index, 1);
                }
            });
        }
        
        function updateKiwiPhrase() {
            const randomPhrase = kiwiPhrases[Math.floor(Math.random() * kiwiPhrases.length)];
            document.getElementById('kiwiPhrase').textContent = randomPhrase;
        }
        
        function checkLevelUp() {
            if (score > 0 && score % 100 === 0 && score / 100 === level) {
                level++;
                createDropBear(); // Add another drop bear each level
                updateKiwiPhrase();
            }
        }
        
        function draw() {
            // Clear canvas with sky gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87CEEB');
            gradient.addColorStop(1, '#98FB98');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw mountains in background
            ctx.fillStyle = '#8B7355';
            ctx.beginPath();
            ctx.moveTo(0, canvas.height);
            for (let i = 0; i <= canvas.width; i += 50) {
                ctx.lineTo(i, canvas.height - Math.sin(i * 0.01) * 50 - 100);
            }
            ctx.lineTo(canvas.width, canvas.height);
            ctx.fill();
            
            // Draw player (Opt2mst)
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // Add robot details
            ctx.fillStyle = '#FFD700';
            ctx.fillRect(player.x + 5, player.y + 5, 10, 10);
            ctx.fillRect(player.x + 25, player.y + 5, 10, 10);
            
            // Draw pavlovas
            pavlovas.forEach(pavlova => {
                if (!pavlova.collected) {
                    ctx.fillStyle = '#FFF8DC';
                    ctx.beginPath();
                    ctx.arc(pavlova.x + pavlova.width/2, pavlova.y + pavlova.height/2, pavlova.width/2, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Add cream and berries
                    ctx.fillStyle = '#FF69B4';
                    ctx.beginPath();
                    ctx.arc(pavlova.x + pavlova.width/2 - 5, pavlova.y + pavlova.height/2 - 3, 3, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#FF0000';
                    ctx.beginPath();
                    ctx.arc(pavlova.x + pavlova.width/2 + 4, pavlova.y + pavlova.height/2 + 2, 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
            
            // Draw drop bears
            dropBears.forEach(bear => {
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(bear.x, bear.y, bear.width, bear.height);
                
                // Add angry eyes
                ctx.fillStyle = '#FF0000';
                ctx.fillRect(bear.x + 5, bear.y + 5, 8, 8);
                ctx.fillRect(bear.x + 22, bear.y + 5, 8, 8);
            });
            
            // Draw particles
            particles.forEach(particle => {
                ctx.fillStyle = particle.color;
                ctx.globalAlpha = particle.life / 30;
                ctx.fillRect(particle.x, particle.y, 4, 4);
                ctx.globalAlpha = 1;
            });
            
            // Draw pause overlay
            if (gamePaused) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = 'white';
                ctx.font = '48px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('PAUSED', canvas.width/2, canvas.height/2);
                ctx.textAlign = 'left';
            }
        }
        
        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('lives').textContent = lives;
            document.getElementById('level').textContent = level;
        }
        
        function gameLoop() {
            if (!gameRunning || gamePaused) return;
            
            updatePlayer();
            updatePavlovas();
            updateDropBears();
            updateParticles();
            checkLevelUp();
            
            draw();
            updateUI();
            
            requestAnimationFrame(gameLoop);
        }
        
        // Initialize the game display
        draw();
        updateUI();
    </script>
</body>
</html>
